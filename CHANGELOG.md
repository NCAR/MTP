# Changelog

Changelog for MTP software

## [Unreleased]

- Update `tests` and `code` to work with new refactored EOLpython logger and to use class variable instead of env var to indicate testing mode. Combine all tests calls under one run_tests script.

- Write to `logfile` by default. Set default loglevel to WARNING and add --v command line option to get info level messages sent to console. When --debug called, debug messages go to both console and logfile. In GUI mode, only WARNING and ERROR message generate message display boxes.

- Fix `BUG` in integrator logic that was cause of first integration (Angle 1, Channel 1) being zero during ACCLIP FF03.

- Remove excess checks and adjust timing on some loops to tighten up scan time. Scan time is now ~19 seconds in the lab which is the same as the VB6.

- Implement working GUI including display of state info. (Still need to code overvoltage)

- Disambiguate send_port and read_port now that both MTPcontrol and MTPviewer
get ports from config file.

## [0.2] - 2022-08-29 - ACCLIP FF03 TEST

This version of the software will be flown on ACCLIP FF03 from Anchorage to RMMA
for additional testing.

### Added

- Implement `IWG averaging`. Average starts with the mirror in the home position,
and accumulates IWG packets thru a complete B line mirror rotation back to home
and continuing through the collection of target and housekeeping data. The data
reported in the IWG line is from the last IWG packet received. Instantaneous IWG
values are still used to do the pointing correction.

- Tighten up `scan time`. With emulator, scan completes in 6 seconds, so I am
hopeful scan will complete in 17 seconds during flight. This will be tested
during FF03.

- Partial implementation of updated `GUI` functionality. Does not work yet.

- Watermark on curtain plot indicating preliminary data if in realtime mode

### Changed

- The number of significant digits reported in the `A line` has been updated to 
better match the Raw files generated by the VB6 code.

- Improved `error handling`

- Default `mtp_emulator` chaos level is now low.

### Removed

- Additional unused files have been removed

## [0.1] - 2022-08-02 - ACCLIP FF02 TEST

This version of the software was flown for ACCIP FF02 leg 2 from Sacramento to
Kona as a first test under flight conditions.

### Added

- Jenkins configuration is saved to a `jenkinsfile`

- Users can now access documentation of the configuration directory
layout and a sample YAML `config file`

- Deploy conda runtime environment via `mtpenv.yml` file

- `mtudpd` now has an option to send to RIC

- A suite of scripts to run the MTP manually for testing

- Initialize the IWG section of the MTP dictionary using the variable list
provided in the ascii_parms file.

- Implement a few unit tests for the control software - incomplete, but
a start.

### Changed

- Fully refactored and updated the `MTPcontrol` program

- Updated deprecated `Oxygen frequencies` to be accurate

- Fixed pointing calculations

- Code now handles varying numbers of flight levels in the RCF file
programmatically.

### Removed

- Unused files have been removed

## [1ba299d] - 2022-03-15

- first tagged release

<!-- Versions -->
[unreleased]: https://github.com/NCAR/MTP/compare/V0.2-ACCLIPff03...HEAD
[0.2]: https://github.com/NCAR/MTP/compare/V0.1-ACCLIPff02...V0.2-ACCLIPff03
[0.1]: https://github.com/NCAR/MTP/compare/pre-tig3er...V0.1-ACCLIPff02
[1ba299d]: https://github.com/NCAR/MTP/releases/tag/pre-tig3er
